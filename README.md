# covan---a coverage analyzer.

Covan analysis the context information in coverage.py's .coverage files to answer one question:
Which context provided coverage of a given part of the source code?
The typical use-case for this is to determine which tests actually tested a certain part of your code base.
This is useful information if you are already tracking your coverage, but either suspect that part of it is unintended coverage from an unrelated test, or if you want to catalog all the tests touching a certain part of your code.

## CLI

Covan provides two commands, namely `find-contexts`, which analyses the coverage information and produces a data frame with the relevant context information, and `format-contexts`, which turns that information into a github markdown formatted list, suitable for inclusion in an issue or similar.

### `find-contexts`

The `find-contexts` command needs to know the source of the coverage information, which can be specified via the `-c` option and defaults to `.coverage`.
It also needs to know where to store the result information, which is given with the `-o` option.
Finally, the relevant parts of the source code need to be specified.
These SPECS are given as a space separated list of files together with lines.
The files can make use of globbing and paths such as '`**a/b.py` to refer to all files `b.py` that reside in any directory in the project tree whose name ends with `a`.
The lines are given as a comma separated list of individual numbers or ranges, e.g. `103,107-343`.
A file and the corresponding lines are separated by a single colon.
Some examples for valid SPECS are `a.py:45`, `a/*/b.py:20-30`, `a/**/b.py:10,34-210`.

```bash
covan find-contexts -c path/to/.coverage -o path/to/output.feather SPECS
```

### `format-contexts`

This command will read an output file as generated by `find-contexts` and produce a list of all found contexts on the standard output.
The list is organized hierarchical with one section per test source file, each containing a checkbox list of contained tests.
If the tests within a given test module are further organized by the use of classes, the list in the section corresponding to that module will be hierarchical as well.
